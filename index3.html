<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AR Video Frame</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@AR.js/aframe/build/aframe-ar.js"></script>
</head>
<body style="background: black; margin: 0;">
    <!-- Static UI (QR code image) -->
    <div id="main-container" style="display: flex; justify-content: center; align-items: center; height: 100vh;">
        <img src="qr-code(2).png" alt="QR Code" style="width: 200px;">
        <p style="color: white;">Scan the QR code to see the magic!</p>
    </div>

    <!-- AR Container (full-screen camera view) -->
    <div id="ar-container" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 1;">
        <a-scene embedded arjs='sourceType: "webcam";'>
            <!-- QR Code Tracker -->
            <a-marker type='pattern' url='pattern-qr-code(2).patt'>
                <!-- Portrait Frame Container -->
                <a-entity 
                    position="0 0 -1" 
                    scale="0.5 0.5 1"
                >
                    <!-- Video Background -->
                    <a-plane 
                        width="2" 
                        height="3" 
                        color="#000" 
                        material='src: #videoTexture;'
                        position="0 0 0"
                    ></a-plane>

                    <!-- Portrait Shape Mask (rounded rectangle) -->
                    <a-plane 
                        width="2" 
                        height="3" 
                        color="white" 
                        material='shader: flat; opacity: 0.01;' 
                        position="0 0 0.01"
                        geometry__primitive="plane"
                        geometry__segments-1="100"
                        geometry__segments-2="100"
                        geometry__radius="0.9"
                        geometry__arc="Math.PI * 2"
                    ></a-plane>
                </a-entity>
            </a-marker>
            <a-camera></a-camera>

            <!-- Video Texture -->
            <video 
                id="videoTexture" 
                src="videoDancing.mp4" 
                loop 
                autoplay 
                playsinline 
                style="display: none;"
            ></video>
        </a-scene>
    </div>

    <script>
        // Show AR when QR is detected
        document.querySelector('a-marker').addEventListener('markerFound', (e) => {
            document.getElementById('main-container').style.display = 'none';
            document.getElementById('ar-container').style.display = 'block';
        });

        // Hide AR when QR is lost
        document.querySelector('a-marker').addEventListener('markerLost', (e) => {
            document.getElementById('main-container').style.display = 'flex';
            document.getElementById('ar-container').style.display = 'none';
        });

        // Prevent default QR code navigation
        document.querySelector('a-marker').addEventListener('markerFound', (e) => {
            e.preventDefault();
        });
    </script>
</body>
</html>